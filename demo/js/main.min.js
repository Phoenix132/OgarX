(function(){function b(d,e,g){function a(j,i){if(!e[j]){if(!d[j]){var f="function"==typeof require&&require;if(!i&&f)return f(j,!0);if(h)return h(j,!0);var c=new Error("Cannot find module '"+j+"'");throw c.code="MODULE_NOT_FOUND",c}var k=e[j]={exports:{}};d[j][0].call(k.exports,function(b){var c=d[j][1][b];return a(c||b)},k,k.exports,b,d,e,g)}return e[j].exports}for(var h="function"==typeof require&&require,c=0;c<g.length;c++)a(g[c]);return a}return b})()({1:[function(a){const b=a("./mouse"),c=a("./state"),d=a("./viewport");window.onload=()=>{const a=new Worker("js/renderer.min.js"),e=document.getElementById("canvas");e.width=window.innerWidth,e.height=window.innerHeight;const f=new b,g=new c,h=new d;(window.onresize=()=>{h.width=window.devicePixelRatio*window.innerWidth,h.height=window.devicePixelRatio*window.innerHeight,e.style.width=window.innerWidth,e.style.height=window.innerHeight})();const i=e.transferControlToOffscreen(),j={offscreen:i,mouse:f.sharedBuffer,viewport:h.sharedBuffer,state:g.sharedBuffer};a.postMessage(j,[i]),a.onmessage=b=>{if("ready"===b.data){const b=new SharedWorker("js/sw.min.js","ogar-x-server");a.postMessage(b.port,[b.port])}};const k=new Set;window.addEventListener("keydown",a=>{k.has(a.key)||("w"==a.key&&(g.macro=1)," "==a.key&&(g.splits=1),"g"==a.key&&(g.splits=2),"z"==a.key&&(g.splits=3),"q"==a.key&&(g.splits=4),"n"==a.key&&(g.respawn=1),k.add(a.key))}),window.addEventListener("keyup",a=>{"w"==a.key&&(g.macro=0),k.delete(a.key)}),e.addEventListener("mousemove",a=>(f.x=a.clientX,f.y=a.clientY)),e.addEventListener("wheel",a=>f.updateScroll(a.deltaY),{passive:!0})}},{"./mouse":2,"./state":3,"./viewport":4}],2:[function(a,b){b.exports=class{constructor(){this.setBuffer()}setBuffer(a=new SharedArrayBuffer(12)){this.sharedBuffer=a,this.buffer=new Int32Array(this.sharedBuffer)}get x(){return Atomics.load(this.buffer,0)}set x(a){Atomics.store(this.buffer,0,a)}get y(){return Atomics.load(this.buffer,1)}set y(a){Atomics.store(this.buffer,1,a)}get scroll(){return Atomics.load(this.buffer,2)}set scroll(a){Atomics.store(this.buffer,2,a)}updateScroll(a){Atomics.add(this.buffer,2,a)}resetScroll(){return Atomics.exchange(this.buffer,2,0)}}},{}],3:[function(a,b){b.exports=class{constructor(){this.setBuffer()}setBuffer(a=new SharedArrayBuffer(5)){this.sharedBuffer=a,this.buffer=new Uint8Array(this.sharedBuffer)}get spectate(){return Atomics.load(this.buffer,0)}set spectate(a){Atomics.store(this.buffer,0,a)}get splits(){return Atomics.load(this.buffer,1)}set splits(a){Atomics.add(this.buffer,1,a)}get ejects(){return Atomics.load(this.buffer,2)}set ejects(a){Atomics.add(this.buffer,2,a)}get macro(){return Atomics.load(this.buffer,3)}set macro(a){Atomics.store(this.buffer,3,a)}get respawn(){return Atomics.load(this.buffer,4)}set respawn(a){Atomics.store(this.buffer,4,a)}exchange(){return{spectate:Atomics.exchange(this.buffer,0,0),splits:Atomics.exchange(this.buffer,1,0),ejects:Atomics.exchange(this.buffer,2,0),macro:this.macro,respawn:Atomics.exchange(this.buffer,4,0)}}}},{}],4:[function(a,b){b.exports=class{constructor(){this.setBuffer()}setBuffer(a=new SharedArrayBuffer(8)){this.sharedBuffer=a,this.buffer=new Int32Array(this.sharedBuffer)}get width(){return Atomics.load(this.buffer,0)}set width(a){Atomics.store(this.buffer,0,a)}get height(){return Atomics.load(this.buffer,1)}set height(a){Atomics.store(this.buffer,1,a)}}},{}]},{},[1]);